#include <SDL2/SDL.h>
#include "font.h"

static inline void render_char(char c, SDL_Rect rect, SDL_Renderer *ren){
  if (c=='#') c=26;
  else if (c=='b') c=27;
  else if (c==' ') c=28;
  else c-='A';
  for (int i=0; i<5; ++i) {
    for (int j=0; j<5; ++j) {
      if (font[(int)c][5*i+j]) {
        SDL_RenderFillRect(ren, &rect);
      }
      rect.x += rect.w;
    }
    rect.x -= 5*rect.w;
    rect.y += rect.h;
  }
}

void font_render_string(SDL_Renderer *ren, int pixel_size, int x, int y, const char *str){
  SDL_Rect rect = {.w = pixel_size, .h = pixel_size, .x = x, .y = y};
  char c;
  while (*str) {
    c = *str++;
    if (!((c>='A' && c<='Z') || c=='#' || c=='b' || c==' ')) return; // not in font

    render_char(c, rect, ren);

    rect.x+=pixel_size*6;
  }
}

const char font[29][25] = { // 0-25: A-Z, 26: #, 27: b 28: 
{
  1, 1, 1, 1, 0, 
  1, 0, 0, 1, 0, 
  1, 1, 1, 1, 0, 
  1, 0, 0, 1, 0, 
  1, 0, 0, 1, 0
},
{
  1, 1, 1, 0, 0, 
  1, 0, 0, 1, 0, 
  1, 1, 1, 0, 0, 
  1, 0, 0, 1, 0, 
  1, 1, 1, 0, 0
},
{
  1, 1, 1, 1, 0, 
  1, 0, 0, 1, 0, 
  1, 0, 0, 0, 0, 
  1, 0, 0, 1, 0, 
  1, 1, 1, 1, 0
},
{
  1, 1, 1, 0, 0, 
  1, 0, 0, 1, 0, 
  1, 0, 0, 1, 0, 
  1, 0, 0, 1, 0, 
  1, 1, 1, 0, 0
},
{
  1, 1, 1, 1, 0, 
  1, 0, 0, 0, 0, 
  1, 1, 1, 0, 0, 
  1, 0, 0, 0, 0, 
  1, 1, 1, 1, 0
},
{
  1, 1, 1, 1, 0, 
  1, 0, 0, 0, 0, 
  1, 1, 1, 0, 0, 
  1, 0, 0, 0, 0, 
  1, 0, 0, 0, 0
},
{
  1, 1, 1, 1, 0, 
  1, 0, 0, 0, 0, 
  1, 0, 1, 1, 0, 
  1, 0, 0, 1, 0, 
  1, 1, 1, 1, 0
},
{
  1, 0, 0, 1, 0, 
  1, 0, 0, 1, 0, 
  1, 1, 1, 1, 0, 
  1, 0, 0, 1, 0, 
  1, 0, 0, 1, 0
},
{
  0, 1, 1, 1, 0, 
  0, 0, 1, 0, 0, 
  0, 0, 1, 0, 0, 
  0, 0, 1, 0, 0, 
  0, 1, 1, 1, 0
},
{
  0, 0, 0, 1, 0, 
  0, 0, 0, 1, 0, 
  0, 0, 0, 1, 0, 
  1, 0, 0, 1, 0, 
  1, 1, 1, 1, 0
},
{
  1, 0, 0, 1, 0, 
  1, 0, 0, 1, 0, 
  1, 1, 1, 0, 0, 
  1, 0, 0, 1, 0, 
  1, 0, 0, 1, 0
},
{
  1, 0, 0, 0, 0, 
  1, 0, 0, 0, 0, 
  1, 0, 0, 0, 0, 
  1, 0, 0, 0, 0, 
  1, 1, 1, 1, 0
},
{
  1, 1, 1, 1, 1, 
  1, 0, 1, 0, 1, 
  1, 0, 0, 0, 1, 
  1, 0, 0, 0, 1, 
  1, 0, 0, 0, 1
},
{
  1, 0, 0, 1, 0, 
  1, 1, 0, 1, 0, 
  1, 0, 1, 1, 0, 
  1, 0, 0, 1, 0, 
  1, 0, 0, 1, 0
},
{
  1, 1, 1, 1, 0, 
  1, 0, 0, 1, 0, 
  1, 0, 0, 1, 0, 
  1, 0, 0, 1, 0, 
  1, 1, 1, 1, 0
},
{
  1, 1, 1, 1, 0, 
  1, 0, 0, 1, 0, 
  1, 1, 1, 1, 0, 
  1, 0, 0, 0, 0, 
  1, 0, 0, 0, 0
},
{
  1, 1, 1, 1, 0, 
  1, 0, 0, 1, 0, 
  1, 0, 0, 1, 0, 
  1, 0, 1, 1, 0, 
  1, 1, 1, 1, 0
},
{
  1, 1, 1, 1, 0, 
  1, 0, 0, 1, 0, 
  1, 1, 1, 0, 0, 
  1, 0, 0, 1, 0, 
  1, 0, 0, 1, 0
},
{
  1, 1, 1, 1, 0, 
  1, 0, 0, 0, 0, 
  1, 1, 1, 1, 0, 
  0, 0, 0, 1, 0, 
  1, 1, 1, 1, 0
},
{
  0, 1, 1, 1, 0, 
  0, 0, 1, 0, 0, 
  0, 0, 1, 0, 0, 
  0, 0, 1, 0, 0, 
  0, 0, 1, 0, 0
},
{
  1, 0, 0, 1, 0, 
  1, 0, 0, 1, 0, 
  1, 0, 0, 1, 0, 
  1, 0, 0, 1, 0, 
  1, 1, 1, 1, 0
},
{
  1, 0, 0, 1, 0, 
  1, 0, 0, 1, 0, 
  1, 0, 0, 1, 0, 
  1, 0, 1, 0, 0, 
  1, 1, 0, 0, 0
},
{
  1, 0, 0, 0, 1, 
  1, 0, 0, 0, 1, 
  1, 0, 0, 0, 1, 
  1, 0, 1, 0, 1, 
  1, 1, 1, 1, 1
},
{
  1, 0, 0, 1, 0, 
  1, 0, 0, 1, 0, 
  0, 1, 1, 0, 0, 
  1, 0, 0, 1, 0, 
  1, 0, 0, 1, 0
},
{
  0, 1, 0, 1, 0, 
  0, 1, 0, 1, 0, 
  0, 0, 1, 0, 0, 
  0, 0, 1, 0, 0, 
  0, 0, 1, 0, 0
},
{
  1, 1, 1, 1, 0, 
  0, 0, 0, 1, 0, 
  1, 1, 1, 1, 0, 
  1, 0, 0, 0, 0, 
  1, 1, 1, 1, 0
},
{
  0, 1, 0, 1, 0, 
  1, 1, 1, 1, 1, 
  0, 1, 0, 1, 0, 
  1, 1, 1, 1, 1, 
  0, 1, 0, 1, 0
},
{
  1, 0, 0, 0, 0, 
  1, 0, 0, 0, 0, 
  1, 1, 1, 0, 0, 
  1, 0, 1, 0, 0, 
  1, 1, 1, 0, 0
},
{
  0, 0, 0, 0, 0, 
  0, 0, 0, 0, 0, 
  0, 0, 0, 0, 0, 
  0, 0, 0, 0, 0, 
  0, 0, 0, 0, 0
}
};
